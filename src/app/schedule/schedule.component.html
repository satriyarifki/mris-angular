<ngx-spinner type="ball-triangle-path" name="cahya" [fullScreen]="true">
  <p style="font-size: 20px; color: white">Loading...</p>
</ngx-spinner>
<div class="flex flex-col">
  <div class="overflow-x-auto">
    <div class="p-1.5 min-w-full inline-block align-middle">
      <div class="w-full flex justify-center pt-5">
        <div class="relative max-w-sm border rounded-md">
          <input
            type="date"
            (input)="sendTheNewValue($event)"
            class="py-3 px-4 w-full border-gray-400 rounded-md text-sm focus:border-blue-500 focus:ring-blue-500"
          />
        </div>
      </div>
      <div
        class="flex flex-wrap bg-white justify-center items-center space-x-2 py-2"
      >
        <a
          (click)="previousWeek()"
          class="inline-flex cursor-pointer shadow-md items-center px-4 max-[560px]:px-2 py-2 text-sm font-medium text-[#54086B] bg-white border border-gray-300 rounded-lg hover:bg-gray-100 hover:text-gray-700"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-4 h-4"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M15 19l-7-7 7-7"
            />
          </svg>
        </a>
        <h1 class="text-lg font-semibold">
          {{ this.arrayDateinWeek[0].full }} -
          {{ this.arrayDateinWeek[6].full }}
        </h1>
        <a
          (click)="nextWeek()"
          class="inline-flex cursor-pointer shadow-md items-center px-4 max-[560px]:px-2 py-2 text-sm font-medium text-[#54086B] bg-white border border-gray-300 rounded-lg hover:bg-gray-100 hover:text-gray-700"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-4 h-4"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M9 5l7 7-7 7"
            />
          </svg>
        </a>
      </div>
      <div class="overflow-hidden">
        <table
          *ngFor="let day of arrayDateinWeek"
          class="my-3 min-w-full divide-y divide-gray-400"
        >
          <thead>
            <tr>
              <th
                scope="col"
                class="px-4 py-3 text-left text-xs font-medium text-gray-200 bg-gray-600 uppercase w-1/6"
              >
                {{ day.dayName + ", " + day.full }}
              </th>
              <th
                *ngFor="let hour of hours"
                scope="col"
                class="text-left text-xs font-medium text-gray-500 border uppercase"
                colspan="2"
              >
                {{ hour }}.00
              </th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-300">
            <tr *ngFor="let room of resourcesApi" class="hover:bg-gray-100">
              <td
                class="p-2 whitespace-nowrap text-sm font-medium text-gray-800"
              >
                {{ room.roomName }}
              </td>
              <ng-container
                *ngFor="
                  let item of changeHourArray(day.full, room.id, hourHalf);
                  let i = index
                "
              >
                <td
                  (click)="
                    this.filterBookedWithHour(
                      day.dayName,
                      day.full,
                      room.id,
                      item
                    ).length != 0
                      ? button(
                          this.filterBookedWithHour(
                            day.dayName,
                            day.full,
                            room.id,
                            item
                          )[0]?.id
                        )
                      : onAuthCheck()
                      ? buttonCreate(day.full, item,room.id)
                      : null
                  "
                  [ngClass]="
                    this.filterBookedWithHour(
                      day.dayName,
                      day.full,
                      room.id,
                      item
                    ).length != 0
                      ? 'bg-blue-300 cursor-pointer hover:bg-blue-400 transition-colors w-8'
                      : 'hover:bg-blue-100'
                  "
                  [attr.colspan]="
                    this.filterBookedWithHour(
                      day.dayName,
                      day.full,
                      room.id,
                      item
                    ).length != 0
                      ? this.filterBookedWithHour(
                          day.dayName,
                          day.full,
                          room.id,
                          item
                        )[0].length * 2
                      : 1
                  "
                  class="px-1 text-xs text-gray-800 border-2 border-gray-200"
                >
                  {{
                    this.filterBookedWithHour(
                      day.dayName,
                      day.full,
                      room.id,
                      item
                    )[0]?.title
                  }}
                </td>
              </ng-container>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
